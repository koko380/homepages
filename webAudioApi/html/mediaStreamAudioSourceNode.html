<!DOCTYPE html>
<html>
  <head lang="ja">
    <meta charset="UTF-8">
    <title>MeidaStreamSourceNode</title>
    <link href="css/mod.css" rel="stylesheet" type="text/css">
  </head>

  <body>
		<h3>WebRTC</h3>
		<p>
			WebRTCとは、「Web Real-Time Communication」の略称で、Webブラウザーにプラグインを追加することなく、リアルタイムに映像や音声のデータをやり取りする規格のことです。
			</p>

		<div class="sampleCode">
    <div class="caption">webRtc.js</div>
      <pre><code>window.addEventListener("load", async function(){

  stream = await navigator.mediaDevices.getUserMedia({audio: true, video: false});

  window.AudioContext = window.AudioContext || window.webkitAudioContext;

  let audioCtx = new AudioContext();

  let destinationNode = audioCtx.destination;

  //mediaStreamAudioAourceNodeを作成
  let mediaStreamAudioSourceNode = audioCtx.createMediaStreamSource(stream);

  //接続:mediaStreamAudioSourceNode =&gt; destinationNode
  mediaStreamAudioSourceNode.connect(destinationNode);
});</code></pre>
    </div>

    <div class="demo">
      <a href="./sample/webRtc.html" target="_blank" rel="noopener noreferrer">デモ:webRtc.js</a>
    </div>

		<p>
			カメラを使いたい場合は、HTMLとJavaScriptにそれぞれ以下のコードを追加・変更ください。
		</p>

		<div class="sampleCode">
    <div class="caption">html</div>
      <pre><code>&lt;video id="video" autoplay playsinline="true"&gt;&lt;/video&gt;</code></pre>
    </div>

		<div class="sampleCode">
    <div class="caption">video.js</div>
      <pre><code>let video = document.getElementById("video");

stream = await navigator.mediaDevices.getUserMedia({audio: true, video: true});

video.srcObject = stream;</code></pre>
    </div>

		<div class="demo">
      <a href="./sample/video.html" target="_blank" rel="noopener noreferrer">デモ:video.js</a>
    </div>
	</body>
</html>
